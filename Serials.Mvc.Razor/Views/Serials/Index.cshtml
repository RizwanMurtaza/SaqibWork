@model List<Serials.Core.SerialViewModel>
@{
    ViewData["Title"] = "Home Page";
}
<style>

    .content {
        padding: 40px 0;
    }
    /*
    .filter-wrapper{
      padding: 30px 0;
    }*/

    .filter-checkbox {
        margin-left: 30px
    }

        .filter-checkbox:first-child {
            margin-left: 0
        }
</style>
<div class="container">
    <div class="content">
        <div class="row">
            <div class="col-8">

            </div>
            <div class="col-4">
                <div class="btn-group submitter-group float-right">
                    <div class="input-group-prepend">
                        <div class="input-group-text">Status</div>
                    </div>
                    <select class="form-control status-dropdown">
                        <option value="">All</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <table id="example" class="table">
        <thead>
            <tr>
                <th>SerialNumber</th>
                <th>FirstName</th>
                <th>LastName</th>
                <th>Email</th>
                <th>ActivationDate</th>
                <th>Software</th>
                <th>Info</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var row in @Model)
            {
                <tr>
                    <td>@row.SerialNumber</td>
                    <td>@row.Firstname</td>
                    <td>@row.Lastname</td>
                    <td>@row.Email</td>
                    <td>@row.ActivationDate</td>
                    <td>@row.Software</td>
                    <td>@row.Info</td>
                    <td><a asp-area="" asp-controller="Serials" asp-action="Edit" asp-route-readerId="@row.SerialNumber">Edit</a></td>
                   @* <td><a asp-area="" asp-controller="Serials" asp-action="Delete" asp-route-readerId="@row.SerialNumber">Delete</a></td>*@
                </tr>
            }
            @*<tr>
                    <td>Donna Snider</td>
                    <td>Customer Support</td>
                    <td>New York</td>
                    <td>27</td>
                    <td>2011/01/25</td>
                    <td>$112,000</td>
                    <td>
                        <div class="badge status-badge badge-info">
                            Draft
                        </div>
                    </td>
                    <td>DRF</td>
                </tr>*@
        </tbody>
        <!--<tfoot>
            <tr>
                <th>
                    <input type="text" id="search_0"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Name" />
                </th>
                <th>
                    <input type="text" id="search_1"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Position" />
                </th>
                <th>
                    <input type="text" id="search_2"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Office" />
                </th>
                <th>
                    <input type="text" id="search_3"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Age" />
                </th>
                <th>
                    <input type="text" id="search_4"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Start date" />
                </th>
                <th>
                    <input type="text" id="search_5"
                           class="form-control input-xs table-filter"
                           style="width: 100%;"
                           placeholder="Salary" />
                </th>
                <th>-->
        <!--<input type="text" id="search_6"
            class="form-control input-xs table-filter"
            style="width: 100%;"
            placeholder="Status"/>  -->
        <!--<select class="form-control status-dropdown">
                    <option value="">All</option>
                    <option value="DRF">Draft</option>
                    <option value="PCH">Pending Review</option>
                    <option value="PAU">Pending Authorisation</option>
                    <option value="Received">Received</option>
                    <option value="Processing">Processing</option>
                    <option value="Query">Query</option>
                    <option value="Approved">Approved</option>
                    <option value="Rejected">Rejected</option>
                    <option value="Amended">Amended</option>
                    <option value="Cancelled">Cancelled</option>
                </select>
            </th>
        </tr>-->
        </tfoot>
    </table>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        dataTable = $("#example").DataTable({
            "columnDefs": [
                {
                    "targets": [7],
                    "visible": false
                }
            ]

        });



        /*dataTable.columns().every( function () {
              var that = this;

              $('input', this.footer()).on( 'keyup change', function () {
                  if ( that.search() !== this.value ) {
                      that.search(this.value).draw();
                  }
              });
            });*/


        $('.filter-checkbox').on('change', function (e) {
            var searchTerms = []
            $.each($('.filter-checkbox'), function (i, elem) {
                if ($(elem).prop('checked')) {
                    searchTerms.push("^" + $(this).val() + "$")
                }
            })
            dataTable.column(1).search(searchTerms.join('|'), true, false, true).draw();
        });

        $('.status-dropdown').on('change', function (e) {
            var status = $(this).val();
            $('.status-dropdown').val(status)
            console.log(status)
            //dataTable.column(6).search('\\s' + status + '\\s', true, false, true).draw();
            dataTable.column(7).search(status).draw();
        })
    });
</script>